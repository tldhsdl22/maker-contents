# F-003. 프롬프트 관리

## 1. 기능 개요

### 1.1 목적

원고 생성 시 적용할 스타일 템플릿을 관리합니다. 관리자가 다양한 톤과 형식의 프롬프트를 사전에 정의해두면, 일반 사용자가 원고 생성 시 원하는 프롬프트를 선택하여 사용합니다.

### 1.2 핵심 가치

- 일관된 품질의 원고 생산을 위한 표준화된 프롬프트 제공
- 다양한 플랫폼과 타겟에 맞는 스타일 분류 체계
- 관리자가 프롬프트를 지속적으로 개선하여 원고 품질 향상

## 2. 권한 체계

프롬프트의 생성, 수정, 삭제는 관리자만 수행할 수 있습니다. 일반 사용자는 원고 생성 시 프롬프트 목록을 조회하고 선택만 할 수 있습니다.

## 3. 데이터 항목

### 3.1 기본 정보

- 프롬프트명: 사용자가 쉽게 식별할 수 있는 이름입니다. 예: "커뮤니티_남자", "블로그_리뷰_여성", "카페_리액션킹"
- 프롬프트 내용: AI에게 전달할 실제 프롬프트 텍스트입니다. 원고의 톤, 문체, 구조, 특징 등을 정의합니다.
- 설명: 이 프롬프트가 어떤 스타일의 원고를 생성하는지에 대한 간략한 설명입니다. 사용자가 프롬프트를 선택할 때 참고합니다.
- 사용 여부: 활성화/비활성화 상태입니다. 비활성화된 프롬프트는 사용자에게 노출되지 않습니다.

### 3.2 시스템 관리 정보

- 생성일, 수정일
- 생성자(관리자 아이디)

## 4. 상세 기능 명세

### 4.1 프롬프트 생성

관리자가 새로운 프롬프트 템플릿을 등록합니다.

접근 권한: 관리자만 사용할 수 있습니다.

동작 방식:
1. 프롬프트명, 프롬프트 내용, 설명을 입력합니다.
2. 프롬프트 내용에는 변수(예: `{원문}`, `{키워드}`)를 포함할 수 있습니다. 이 변수는 원고 생성 시 실제 값으로 치환됩니다.
3. 저장 시 기본적으로 활성화 상태로 등록됩니다.

### 4.2 프롬프트 수정

관리자가 기존 프롬프트의 내용을 수정합니다.

접근 권한: 관리자만 사용할 수 있습니다.

동작 방식:
1. 프롬프트 목록에서 수정할 프롬프트를 선택합니다.
2. 프롬프트명, 내용, 설명을 수정하고 저장합니다.
3. 수정해도 이미 생성된 원고에는 영향을 주지 않습니다.

### 4.3 프롬프트 비활성화/삭제

관리자가 더 이상 사용하지 않는 프롬프트를 비활성화하거나 삭제합니다.

동작 방식:
1. 비활성화 시 사용자의 프롬프트 선택 목록에서 숨겨집니다.
2. 삭제 시 완전히 제거됩니다. 단, 해당 프롬프트를 사용하여 생성된 원고가 있는 경우, 원고에 기록된 프롬프트 정보는 유지됩니다.

### 4.4 프롬프트 목록 조회

사용자가 원고 생성 시 사용할 프롬프트를 선택하기 위해 목록을 조회합니다.

접근 권한: 모든 인증된 사용자가 조회할 수 있습니다.

표시 규칙:
- 활성화된 프롬프트만 표시합니다.
- 프롬프트명과 설명을 함께 표시하여 사용자가 적절한 프롬프트를 선택할 수 있도록 합니다.

## 5. 화면 정보

### S-005 프롬프트 관리 페이지 (관리자)

프롬프트 목록을 리스트 형태로 표시합니다. 각 항목에 프롬프트명, 설명, 상태(활성/비활성), 수정일을 표시합니다. 상단에 "새 프롬프트 추가" 버튼을 배치합니다. 각 항목에 수정, 비활성화/활성화, 삭제 버튼을 표시합니다.

### S-006 프롬프트 편집 페이지 (관리자)

프롬프트명, 설명 입력 필드와 프롬프트 내용을 작성하는 큰 텍스트 영역으로 구성됩니다. 사용 가능한 변수 목록(예: `{원문}`, `{키워드}`)을 안내합니다.

## 6. API 정보

- GET /api/prompts: 프롬프트 목록 조회 (사용자: 활성화된 것만, 관리자: 전체)
- GET /api/prompts/:id: 프롬프트 상세 조회
- POST /api/admin/prompts: 프롬프트 생성 (관리자)
- PUT /api/admin/prompts/:id: 프롬프트 수정 (관리자)
- PATCH /api/admin/prompts/:id/toggle: 프롬프트 활성화/비활성화 (관리자)
- DELETE /api/admin/prompts/:id: 프롬프트 삭제 (관리자)

## 7. 비즈니스 로직

- 프롬프트 내용에 `{원문}` 변수가 반드시 포함되어야 합니다. 이는 소스 기사의 원문이 삽입되는 위치입니다.
- `{키워드}` 변수는 선택적이며, 원고 생성 시 사용자가 키워드를 입력한 경우에만 치환됩니다.

## 8. 연관 기능

- F-005 원고 생성: 사용자가 프롬프트를 선택하여 원고를 생성합니다.
