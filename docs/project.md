# ContentFoundry 기능 정의서

## 1. 프로젝트 개요

ContentFoundry는 뉴스 기사를 자동으로 수집하고, AI를 활용하여 사용자가 원하는 스타일의 원고로 변환하는 콘텐츠 생산 시스템입니다. 수집된 기사를 기반으로 프롬프트 템플릿을 적용하여 원고를 생성하고, 이미지를 자동으로 배치 및 가공한 뒤, 네이버 블로그나 카페에 포스팅할 수 있는 형태로 완성합니다. 포스팅 이후에는 키워드 순위, 조회수, 댓글 등의 성과를 자동으로 추적합니다.

### 1.1 기술 스택

- 프론트엔드: React + Next.js
- 이미지 생성: 나노바나나 (추후 교체 가능)
- 배포 환경: AWS EC2, Ubuntu 22.04
- 데이터 수집: 뉴스 사이트 크롤링 (추후 유튜브 확장 구상 중)

### 1.2 사용자 규모

5~10명 규모의 팀이 사용하는 웹 애플리케이션입니다.

### 1.3 핵심 워크플로우

소스 자동 수집 → 기사 선택 및 수정 세팅 → AI 원고 생성 및 이미지 배치 → 원고 편집 → 내 원고 리스트 저장 → 복붙 포스팅 → URL 등록 및 완료 처리 → 성과 추적

---

## 2. 전체 기능 요약

| 기능 ID | 기능명 | 설명 |
|---------|--------|------|
| F-001 | 인증 및 사용자 관리 | 회원가입(관리자 승인), 로그인, 권한 관리 |
| F-002 | 소스 크롤링 | 뉴스 기사 자동 수집 (1시간 주기, 7일 보관) |
| F-003 | 프롬프트 관리 | 관리자의 원고 스타일 템플릿 CRUD |
| F-004 | 이미지 처리 템플릿 관리 | 관리자의 이미지 가공 방식 정의 |
| F-005 | 원고 생성 | 소스 + 프롬프트 + 설정으로 AI 원고 생성 |
| F-006 | 원고 편집 및 관리 | WYSIWYG 편집기, 내 원고 목록 관리 |
| F-007 | 포스팅 관리 | 복붙 포스팅 후 URL 등록, 완료 처리 |
| F-008 | 성과 추적 | 키워드 순위, 조회수, 댓글 추적 (1시간 간격, 7일간) |
| F-009 | 대시보드 | 작업량 요약, 최근 작업 성과 목록 |

---

## 3. 상세 기능 정의

---

### F-001. 인증 및 사용자 관리

#### 1. 기능 개요

##### 1.1 목적

ContentFoundry에 접근하는 사용자를 인증하고, 역할에 따른 권한을 관리합니다. 5~10명 규모의 팀이 사용하므로, 관리자가 사용자를 통제할 수 있는 승인 기반 회원가입 체계를 제공합니다.

##### 1.2 핵심 가치

- 관리자 승인을 통한 사용자 접근 통제
- 역할 기반 권한 분리로 시스템 안정성 확보
- 간결한 인증 체계로 빠른 접근

#### 2. 권한 체계

##### 2.1 역할 정의

시스템은 두 가지 역할을 제공합니다.

**관리자**는 시스템의 전반적인 설정과 사용자를 관리하는 역할입니다. 사용자 관리, 프롬프트 관리, 이미지 처리 템플릿 관리 권한을 가집니다. 관리자도 일반 사용자의 모든 기능(기사 선택, 원고 생성, 포스팅 등)을 사용할 수 있습니다.

**일반 사용자**는 콘텐츠 생산 워크플로우를 수행하는 역할입니다. 소스 기사를 선택하고, 원고를 생성하고, 편집하고, 포스팅하는 모든 과정을 수행합니다.

##### 2.2 접근 범위

각 사용자는 자신이 생성한 원고만 조회하고 관리할 수 있습니다. 소스 기사 목록은 모든 사용자가 공유하여 조회합니다. 관리자는 모든 사용자의 원고 및 포스팅 현황을 조회할 수 있습니다.

#### 3. 데이터 항목

##### 3.1 기본 정보

사용자 계정은 다음 항목으로 구성됩니다.

- 아이디: 로그인에 사용하는 고유 식별자입니다. 영문 소문자와 숫자 조합으로 4~20자까지 허용합니다.
- 이름: 시스템 내에서 표시되는 사용자 이름입니다.
- 비밀번호: 로그인에 사용하는 비밀번호입니다. 8자 이상, 영문과 숫자를 반드시 포함해야 합니다.

##### 3.2 시스템 관리 정보

- 역할: 관리자 또는 일반 사용자
- 승인 상태: 대기, 승인, 반려
- 가입 신청일, 승인일
- 최종 로그인 일시

#### 4. 상세 기능 명세

##### 4.1 회원가입

사용자가 아이디, 이름, 비밀번호를 입력하여 가입을 신청합니다. 가입 신청이 완료되면 "관리자 승인 후 이용 가능합니다"라는 안내 메시지를 표시합니다. 관리자가 승인하기 전까지 해당 계정으로는 로그인할 수 없습니다.

접근 권한: 누구나 가입 신청이 가능합니다.

동작 방식:
1. 사용자가 회원가입 페이지에서 아이디, 이름, 비밀번호, 비밀번호 확인을 입력합니다.
2. 아이디 중복 여부를 실시간으로 확인합니다.
3. 비밀번호와 비밀번호 확인이 일치하는지 검증합니다.
4. 모든 검증을 통과하면 가입 신청을 접수하고 승인 대기 상태로 등록합니다.
5. 관리자에게 새로운 가입 신청이 있음을 알립니다.

예외 처리:
- 아이디가 이미 존재하는 경우 "이미 사용 중인 아이디입니다"를 표시합니다.
- 비밀번호 조건을 충족하지 못하면 구체적인 조건을 안내합니다.
- 비밀번호와 확인이 불일치하면 "비밀번호가 일치하지 않습니다"를 표시합니다.

##### 4.2 가입 승인 관리

관리자가 가입 신청 목록을 확인하고 승인 또는 반려합니다.

접근 권한: 관리자만 사용할 수 있습니다.

동작 방식:
1. 관리자 페이지에서 가입 대기 중인 사용자 목록을 확인합니다.
2. 각 신청에 대해 승인 또는 반려를 선택합니다.
3. 승인 시 역할(관리자 또는 일반 사용자)을 지정합니다. 기본값은 일반 사용자입니다.
4. 승인된 사용자는 즉시 로그인이 가능해집니다.

##### 4.3 로그인

승인된 사용자가 아이디와 비밀번호로 시스템에 접근합니다.

접근 권한: 승인된 사용자만 로그인할 수 있습니다.

동작 방식:
1. 아이디와 비밀번호를 입력합니다.
2. 인증에 성공하면 대시보드 페이지로 이동합니다.
3. 세션은 일정 시간(예: 24시간) 동안 유지되며, 만료 시 다시 로그인해야 합니다.

예외 처리:
- 아이디 또는 비밀번호가 틀린 경우 "아이디 또는 비밀번호가 올바르지 않습니다"를 표시합니다.
- 승인 대기 상태인 계정으로 로그인 시도 시 "관리자 승인 대기 중입니다"를 표시합니다.
- 반려된 계정으로 로그인 시도 시 "가입이 반려된 계정입니다"를 표시합니다.

##### 4.4 사용자 관리

관리자가 전체 사용자 목록을 조회하고, 역할 변경 및 계정 비활성화를 수행합니다.

접근 권한: 관리자만 사용할 수 있습니다.

동작 방식:
1. 전체 사용자 목록을 아이디, 이름, 역할, 상태, 최종 로그인 일시와 함께 표시합니다.
2. 사용자의 역할을 변경(관리자 ↔ 일반 사용자)할 수 있습니다.
3. 계정을 비활성화하여 로그인을 차단할 수 있습니다.

#### 5. 화면 정보

##### S-001 로그인 페이지

아이디, 비밀번호 입력 필드와 로그인 버튼, 회원가입 링크로 구성됩니다. 심플한 중앙 정렬 레이아웃을 사용합니다.

##### S-002 회원가입 페이지

아이디, 이름, 비밀번호, 비밀번호 확인 입력 필드와 가입 신청 버튼으로 구성됩니다.

##### S-003 사용자 관리 페이지 (관리자)

가입 대기 목록과 전체 사용자 목록을 탭으로 구분하여 보여줍니다. 각 사용자 행에 승인/반려 버튼 또는 역할 변경, 비활성화 버튼을 표시합니다.

#### 6. API 정보

- POST /api/auth/register: 회원가입 신청
- POST /api/auth/login: 로그인
- POST /api/auth/logout: 로그아웃
- GET /api/admin/users: 사용자 목록 조회 (관리자)
- GET /api/admin/users/pending: 가입 대기 목록 조회 (관리자)
- PATCH /api/admin/users/:id/approve: 가입 승인 (관리자)
- PATCH /api/admin/users/:id/reject: 가입 반려 (관리자)
- PATCH /api/admin/users/:id/role: 역할 변경 (관리자)
- PATCH /api/admin/users/:id/deactivate: 계정 비활성화 (관리자)

#### 7. 비즈니스 로직

- 첫 번째로 가입한 사용자는 자동으로 관리자 역할이 부여되며 별도 승인 없이 바로 사용 가능합니다.
- 관리자가 1명뿐인 상태에서 해당 관리자의 역할을 변경하거나 비활성화할 수 없습니다.

#### 8. 연관 기능

- F-009 대시보드: 로그인 후 대시보드로 이동합니다.
- F-003 프롬프트 관리, F-004 이미지 처리 템플릿 관리: 관리자 권한이 필요합니다.

---

### F-002. 소스 크롤링

#### 1. 기능 개요

##### 1.1 목적

뉴스 사이트에서 기사를 자동으로 수집하여 원고 생성의 소스로 활용합니다. 기사의 원문 텍스트와 이미지를 HTML 구조 그대로 보존하여 가져옵니다.

##### 1.2 핵심 가치

- 화제성 있는 콘텐츠를 자동으로 수집하여 소스 탐색 시간 절감
- 원문의 텍스트와 이미지를 구조적으로 보존하여 원고 생성의 정확도 향상
- 7일간 보관하여 적절한 소스 풀 유지

#### 2. 권한 체계

소스 기사 목록은 모든 인증된 사용자(관리자, 일반 사용자)가 조회할 수 있습니다. 크롤링은 시스템이 자동으로 수행하며, 크롤링 대상 사이트는 시스템에 미리 정의되어 있습니다.

#### 3. 데이터 항목

##### 3.1 기본 정보

각 수집된 기사는 다음 항목을 포함합니다.

- 기사 제목: 원문의 제목을 그대로 저장합니다.
- 썸네일 이미지: 기사의 대표 이미지입니다.
- 원문 URL: 기사의 원본 링크입니다.
- 본문 HTML: 텍스트와 이미지 태그가 포함된 원문 HTML 구조입니다. 예시: `~~했다고 합니다. <img src="~~.jpg"/> 그런데 어쩌고저쩌고 <img src="~~.jpg">`
- 카테고리: 기사의 분류(정치, 경제, 사회, IT, 연예 등)입니다.
- 출처: 수집한 뉴스 사이트명입니다.

##### 3.2 시스템 관리 정보

- 수집 일시
- 만료 일시: 수집 후 7일
- 작업 상태: 현재 이 기사를 작업 중인 사용자 목록

#### 4. 상세 기능 명세

##### 4.1 자동 크롤링

시스템이 1시간 간격으로 뉴스 사이트에서 기사를 자동 수집합니다.

동작 방식:
1. 사전에 정의된 뉴스 사이트 목록을 순회하며 기사를 수집합니다.
2. 기사의 제목, 본문(HTML 포함), 이미지, 카테고리 등을 파싱합니다.
3. 이미 수집된 기사(URL 기준 중복)는 건너뜁니다.
4. 본문에 포함된 이미지는 원본 URL을 보존하되, 별도로 서버에 다운로드하여 저장합니다. 이는 원본 사이트에서 이미지가 삭제될 경우를 대비합니다.
5. 수집 완료 후 새로 추가된 기사 수를 로그에 기록합니다.

예외 처리:
- 크롤링 대상 사이트에 접근이 불가능한 경우 해당 사이트를 건너뛰고 다음 주기에 재시도합니다.
- 파싱에 실패한 기사는 건너뛰고 오류 로그를 남깁니다.

##### 4.2 자동 삭제

수집 후 7일이 경과한 기사는 자동으로 삭제됩니다.

동작 방식:
1. 매 크롤링 주기마다 만료된 기사를 확인합니다.
2. 만료된 기사 중 어떤 사용자도 원고 생성에 사용하지 않은 기사를 삭제합니다.
3. 이미 원고 생성에 사용된 기사의 경우, 소스 목록에서는 제거하되 해당 원고의 원본 데이터는 유지합니다.

##### 4.3 소스 기사 목록 조회

사용자가 수집된 기사 목록을 조회하여 원고 생성할 기사를 선택합니다.

접근 권한: 모든 인증된 사용자가 사용할 수 있습니다.

동작 방식:
1. 기사 목록을 최신순으로 표시합니다. 각 항목에는 제목, 썸네일, 수집 일시, 출처가 표시됩니다.
2. 카테고리별 필터를 제공합니다.
3. 제목 기반 검색 기능을 제공합니다.
4. 각 기사에 현재 작업 중인 사용자가 있다면 해당 사용자의 이름을 표시합니다. 예: "홍길동 작업 중"
5. 기사를 클릭하면 원문 미리보기와 함께 원고 생성 세팅 화면으로 이동합니다.

표시 규칙:
- 작업 중인 사용자가 있는 기사는 별도 표시(아이콘 또는 뱃지)로 구분합니다.
- 다른 사용자가 작업 중이더라도 동일 기사를 선택하여 작업할 수 있습니다.

#### 5. 화면 정보

##### S-004 소스 기사 목록 페이지

상단에 검색 바와 카테고리 필터를 배치합니다. 기사 목록은 카드 또는 리스트 형태로 표시하며, 각 카드에 썸네일, 제목, 수집 일시, 출처, 작업 중인 사용자를 표시합니다. 무한 스크롤 또는 페이지네이션으로 목록을 탐색합니다.

#### 6. API 정보

- GET /api/sources: 소스 기사 목록 조회 (필터, 검색, 페이지네이션 지원)
- GET /api/sources/:id: 소스 기사 상세 조회 (원문 HTML 포함)

#### 7. 비즈니스 로직

- 크롤링 주기: 1시간 간격으로 자동 실행됩니다.
- 보관 기간: 수집일로부터 7일 후 자동 삭제됩니다.
- 중복 방지: 동일 URL의 기사는 중복 수집하지 않습니다.
- 이미지 보존: 원본 이미지를 서버에 별도 저장하여 원본 사이트의 이미지 삭제에 대비합니다.

#### 8. 연관 기능

- F-005 원고 생성: 소스 기사를 선택하여 원고를 생성합니다.
- F-006 원고 편집 및 관리: 소스 기사가 원고 생성에 사용된 경우, 기사 만료 후에도 원고의 원본 데이터는 유지합니다.

---

### F-003. 프롬프트 관리

#### 1. 기능 개요

##### 1.1 목적

원고 생성 시 적용할 스타일 템플릿을 관리합니다. 관리자가 다양한 톤과 형식의 프롬프트를 사전에 정의해두면, 일반 사용자가 원고 생성 시 원하는 프롬프트를 선택하여 사용합니다.

##### 1.2 핵심 가치

- 일관된 품질의 원고 생산을 위한 표준화된 프롬프트 제공
- 다양한 플랫폼과 타겟에 맞는 스타일 분류 체계
- 관리자가 프롬프트를 지속적으로 개선하여 원고 품질 향상

#### 2. 권한 체계

프롬프트의 생성, 수정, 삭제는 관리자만 수행할 수 있습니다. 일반 사용자는 원고 생성 시 프롬프트 목록을 조회하고 선택만 할 수 있습니다.

#### 3. 데이터 항목

##### 3.1 기본 정보

- 프롬프트명: 사용자가 쉽게 식별할 수 있는 이름입니다. 예: "커뮤니티_남자", "블로그_리뷰_여성", "카페_리액션킹"
- 프롬프트 내용: AI에게 전달할 실제 프롬프트 텍스트입니다. 원고의 톤, 문체, 구조, 특징 등을 정의합니다.
- 설명: 이 프롬프트가 어떤 스타일의 원고를 생성하는지에 대한 간략한 설명입니다. 사용자가 프롬프트를 선택할 때 참고합니다.
- 사용 여부: 활성화/비활성화 상태입니다. 비활성화된 프롬프트는 사용자에게 노출되지 않습니다.

##### 3.2 시스템 관리 정보

- 생성일, 수정일
- 생성자(관리자 아이디)

#### 4. 상세 기능 명세

##### 4.1 프롬프트 생성

관리자가 새로운 프롬프트 템플릿을 등록합니다.

접근 권한: 관리자만 사용할 수 있습니다.

동작 방식:
1. 프롬프트명, 프롬프트 내용, 설명을 입력합니다.
2. 프롬프트 내용에는 변수(예: `{원문}`, `{키워드}`)를 포함할 수 있습니다. 이 변수는 원고 생성 시 실제 값으로 치환됩니다.
3. 저장 시 기본적으로 활성화 상태로 등록됩니다.

##### 4.2 프롬프트 수정

관리자가 기존 프롬프트의 내용을 수정합니다.

접근 권한: 관리자만 사용할 수 있습니다.

동작 방식:
1. 프롬프트 목록에서 수정할 프롬프트를 선택합니다.
2. 프롬프트명, 내용, 설명을 수정하고 저장합니다.
3. 수정해도 이미 생성된 원고에는 영향을 주지 않습니다.

##### 4.3 프롬프트 비활성화/삭제

관리자가 더 이상 사용하지 않는 프롬프트를 비활성화하거나 삭제합니다.

동작 방식:
1. 비활성화 시 사용자의 프롬프트 선택 목록에서 숨겨집니다.
2. 삭제 시 완전히 제거됩니다. 단, 해당 프롬프트를 사용하여 생성된 원고가 있는 경우, 원고에 기록된 프롬프트 정보는 유지됩니다.

##### 4.4 프롬프트 목록 조회

사용자가 원고 생성 시 사용할 프롬프트를 선택하기 위해 목록을 조회합니다.

접근 권한: 모든 인증된 사용자가 조회할 수 있습니다.

표시 규칙:
- 활성화된 프롬프트만 표시합니다.
- 프롬프트명과 설명을 함께 표시하여 사용자가 적절한 프롬프트를 선택할 수 있도록 합니다.

#### 5. 화면 정보

##### S-005 프롬프트 관리 페이지 (관리자)

프롬프트 목록을 리스트 형태로 표시합니다. 각 항목에 프롬프트명, 설명, 상태(활성/비활성), 수정일을 표시합니다. 상단에 "새 프롬프트 추가" 버튼을 배치합니다. 각 항목에 수정, 비활성화/활성화, 삭제 버튼을 표시합니다.

##### S-006 프롬프트 편집 페이지 (관리자)

프롬프트명, 설명 입력 필드와 프롬프트 내용을 작성하는 큰 텍스트 영역으로 구성됩니다. 사용 가능한 변수 목록(예: `{원문}`, `{키워드}`)을 안내합니다.

#### 6. API 정보

- GET /api/prompts: 프롬프트 목록 조회 (사용자: 활성화된 것만, 관리자: 전체)
- GET /api/prompts/:id: 프롬프트 상세 조회
- POST /api/admin/prompts: 프롬프트 생성 (관리자)
- PUT /api/admin/prompts/:id: 프롬프트 수정 (관리자)
- PATCH /api/admin/prompts/:id/toggle: 프롬프트 활성화/비활성화 (관리자)
- DELETE /api/admin/prompts/:id: 프롬프트 삭제 (관리자)

#### 7. 비즈니스 로직

- 프롬프트 내용에 `{원문}` 변수가 반드시 포함되어야 합니다. 이는 소스 기사의 원문이 삽입되는 위치입니다.
- `{키워드}` 변수는 선택적이며, 원고 생성 시 사용자가 키워드를 입력한 경우에만 치환됩니다.

#### 8. 연관 기능

- F-005 원고 생성: 사용자가 프롬프트를 선택하여 원고를 생성합니다.

---

### F-004. 이미지 처리 템플릿 관리

#### 1. 기능 개요

##### 1.1 목적

원고에 사용되는 이미지의 가공 방식을 관리자가 정의합니다. 원본 기사에 포함된 이미지를 가공하는 방식과, 새로 생성하는 이미지의 생성 방식을 각각 정의하여, 사용자가 원고 생성 시 원하는 이미지 처리 방식을 선택할 수 있도록 합니다.

##### 1.2 핵심 가치

- 이미지 저작권 이슈를 회피하기 위한 다양한 가공 옵션 제공
- 콘텐츠 스타일에 맞는 이미지 일관성 유지
- 이미지 처리 방식의 중앙 관리를 통한 품질 통제

#### 2. 권한 체계

이미지 처리 템플릿의 생성, 수정, 삭제는 관리자만 수행할 수 있습니다. 일반 사용자는 원고 생성 시 템플릿 목록을 조회하고 선택만 할 수 있습니다.

#### 3. 데이터 항목

##### 3.1 기본 정보

- 템플릿명: 사용자가 식별할 수 있는 이름입니다. 예: "원본 유사 변환", "2D 일러스트", "색상 변환"
- 설명: 이미지가 어떻게 처리되는지에 대한 간략한 설명입니다.
- 원본 이미지 처리 방식: 기사에 이미 포함된 이미지를 어떻게 가공할지 정의합니다.
  - 원본 유지(유사 제거 리드로잉): 원본과 비슷하지만 중복 판정을 피하도록 다시 그립니다.
  - 2D 이미지로 변환: 원본을 2D 일러스트 스타일로 변환합니다.
  - 색상 변환: 원본의 색조, 채도 등을 변경합니다.
  - 기타: 관리자가 정의하는 추가적인 가공 방식입니다.
- 신규 이미지 생성 방식: 이미지가 부족할 때 새로 생성하는 이미지의 스타일을 정의합니다.
  - 생성 프롬프트: 이미지 생성 AI(나노바나나)에게 전달할 프롬프트입니다.
  - 스타일 지정: 생성할 이미지의 스타일(사실적, 2D, 만화풍 등)을 정의합니다.
- 워터마크 제거 여부: 원본 이미지의 워터마크를 제거할지 여부입니다.
- 사용 여부: 활성화/비활성화 상태입니다.

##### 3.2 시스템 관리 정보

- 생성일, 수정일
- 생성자(관리자 아이디)

#### 4. 상세 기능 명세

##### 4.1 이미지 처리 템플릿 생성

관리자가 새로운 이미지 처리 템플릿을 등록합니다.

접근 권한: 관리자만 사용할 수 있습니다.

동작 방식:
1. 템플릿명, 설명을 입력합니다.
2. 원본 이미지 처리 방식을 선택하고, 필요한 경우 세부 설정(변환 강도, 스타일 등)을 지정합니다.
3. 신규 이미지 생성 방식을 정의합니다. 이미지 생성 프롬프트와 스타일을 입력합니다.
4. 워터마크 제거 여부를 설정합니다.
5. 저장 시 기본적으로 활성화 상태로 등록됩니다.

##### 4.2 이미지 처리 템플릿 수정

관리자가 기존 템플릿의 내용을 수정합니다. 수정해도 이미 생성된 원고의 이미지에는 영향을 주지 않습니다.

##### 4.3 이미지 처리 템플릿 비활성화/삭제

비활성화 시 사용자의 선택 목록에서 숨겨집니다. 삭제 시 완전히 제거됩니다.

#### 5. 화면 정보

##### S-007 이미지 처리 템플릿 관리 페이지 (관리자)

템플릿 목록을 리스트 형태로 표시합니다. 각 항목에 템플릿명, 설명, 처리 방식 요약, 상태를 표시합니다.

##### S-008 이미지 처리 템플릿 편집 페이지 (관리자)

템플릿명, 설명, 원본 이미지 처리 방식 선택, 신규 이미지 생성 프롬프트/스타일 입력, 워터마크 제거 토글로 구성됩니다. 각 처리 방식에 대한 미리보기 예시를 제공하면 좋습니다.

#### 6. API 정보

- GET /api/image-templates: 이미지 처리 템플릿 목록 조회
- GET /api/image-templates/:id: 이미지 처리 템플릿 상세 조회
- POST /api/admin/image-templates: 템플릿 생성 (관리자)
- PUT /api/admin/image-templates/:id: 템플릿 수정 (관리자)
- PATCH /api/admin/image-templates/:id/toggle: 활성화/비활성화 (관리자)
- DELETE /api/admin/image-templates/:id: 템플릿 삭제 (관리자)

#### 7. 비즈니스 로직

- 이미지 생성 AI는 현재 나노바나나를 사용하되, 추후 교체 가능하도록 추상화 레이어를 둡니다.
- 원본 이미지 처리와 신규 이미지 생성은 독립적인 설정입니다. 하나의 템플릿에서 두 가지를 모두 정의합니다.

#### 8. 연관 기능

- F-005 원고 생성: 사용자가 이미지 처리 템플릿을 선택하여 원고를 생성합니다.
- F-003 프롬프트 관리: 프롬프트와 이미지 처리 템플릿을 조합하여 최종 원고를 생성합니다.

---

### F-005. 원고 생성

#### 1. 기능 개요

##### 1.1 목적

수집된 소스 기사를 기반으로 AI를 활용하여 사용자가 원하는 스타일의 원고를 자동 생성합니다. 프롬프트 템플릿과 이미지 처리 템플릿을 조합하여, 텍스트와 이미지가 모두 포함된 완성형 원고를 만들어냅니다.

##### 1.2 핵심 가치

- 소스 기사를 다양한 톤과 스타일로 빠르게 변환
- 이미지 자동 배치 및 가공으로 완성도 높은 원고 생산
- 키워드 최적화를 통한 검색 노출 향상

#### 2. 권한 체계

모든 인증된 사용자(관리자, 일반 사용자)가 원고를 생성할 수 있습니다. 각 사용자는 자신이 생성한 원고만 관리합니다. 같은 소스 기사를 여러 사용자가 각각 다른 설정으로 원고를 생성할 수 있습니다.

#### 3. 데이터 항목

##### 3.1 생성 설정 (사용자 입력)

- 소스 기사: 원고의 기반이 되는 크롤링된 기사입니다.
- 프롬프트 선택: 적용할 프롬프트 템플릿입니다.
- 이미지 처리 템플릿 선택: 적용할 이미지 가공 방식입니다.
- 키워드 (선택): 원고에 반영할 키워드입니다. 입력하지 않아도 원고 생성이 가능합니다.
- 글 길이: 생성할 원고의 대략적인 길이를 지정합니다. (예: 짧게, 보통, 길게 또는 글자 수 범위)
- 새로운 이미지 생성 개수: 원본 이미지 외에 AI로 추가 생성할 이미지 수를 지정합니다. 기본값은 0입니다.

##### 3.2 생성 결과

- 원고 본문: HTML 형태의 완성된 원고입니다. 텍스트와 이미지가 포함됩니다.
- 사용된 이미지 목록: 원본 이미지(가공 후)와 신규 생성 이미지의 목록입니다.
- 생성 설정 기록: 어떤 프롬프트, 이미지 템플릿, 키워드, 글 길이로 생성했는지 기록합니다.

##### 3.3 시스템 관리 정보

- 생성 일시
- 생성자(사용자 아이디)
- 원고 상태: 생성 중, 생성 완료, 포스팅 완료

#### 4. 상세 기능 명세

##### 4.1 원고 생성 세팅

사용자가 소스 기사를 선택한 후 원고 생성에 필요한 설정을 입력합니다.

접근 권한: 모든 인증된 사용자가 사용할 수 있습니다.

동작 방식:
1. 소스 기사 목록에서 기사를 선택하면 생성 세팅 화면으로 이동합니다.
2. 화면 좌측에는 원본 기사의 미리보기(제목, 본문, 이미지)를 표시합니다.
3. 화면 우측에는 설정 패널을 표시합니다.
   - 프롬프트 선택: 드롭다운으로 활성화된 프롬프트 목록을 표시합니다. 각 항목에 프롬프트명과 설명을 표시합니다.
   - 이미지 처리 템플릿 선택: 드롭다운으로 활성화된 템플릿 목록을 표시합니다.
   - 키워드 입력 (선택): 텍스트 입력 필드입니다.
   - 글 길이 선택: 짧게(500자 내외), 보통(1000자 내외), 길게(2000자 내외) 중 선택합니다.
   - 새 이미지 생성 개수: 숫자 입력 필드입니다. 0~10 범위를 허용합니다.
4. "원고 생성" 버튼을 클릭하면 AI 원고 생성을 시작합니다.

##### 4.2 AI 원고 생성 처리

사용자가 설정한 옵션에 따라 AI가 원고를 생성하고 이미지를 배치합니다.

동작 방식:
1. 선택한 프롬프트 템플릿의 `{원문}` 변수에 소스 기사의 본문을 삽입하고, `{키워드}` 변수에 입력된 키워드를 삽입합니다.
2. 완성된 프롬프트를 AI(LLM)에 전달하여 원고 텍스트를 생성합니다.
3. 원본 기사의 이미지를 선택한 이미지 처리 템플릿에 따라 가공합니다.
   - 워터마크 제거가 활성화된 경우 워터마크를 먼저 제거합니다.
   - 정의된 처리 방식(유사 제거 리드로잉, 2D 변환, 색상 변환 등)을 적용합니다.
4. 새 이미지 생성 개수가 1 이상인 경우, 이미지 처리 템플릿에 정의된 신규 이미지 생성 방식에 따라 이미지를 생성합니다. 이미지 생성에는 원고의 맥락(주변 텍스트 내용)을 참고하여 관련성 있는 이미지를 만듭니다.
5. AI가 원고의 문맥을 분석하여 이미지를 자연스러운 위치에 자동 배치합니다. 원본 이미지는 원문에서의 상대적 위치를 참고하여 배치하고, 신규 생성 이미지는 텍스트 사이사이에 균등하게 분배합니다.
6. 생성이 완료되면 결과를 편집 화면(F-006)으로 전달합니다.

표시 규칙:
- 생성 중에는 진행 상태를 표시합니다. (예: "원고 생성 중...", "이미지 처리 중...")
- 예상 소요 시간을 안내합니다.

예외 처리:
- AI 원고 생성에 실패한 경우 "원고 생성에 실패했습니다. 다시 시도해 주세요."를 표시하고 재시도 버튼을 제공합니다.
- 이미지 가공/생성에 부분적으로 실패한 경우, 성공한 이미지만 포함하여 원고를 완성하고 실패한 이미지에 대해 안내합니다.
- 원본 기사에 이미지가 없고 새 이미지 생성 개수도 0인 경우, 텍스트만으로 원고를 생성합니다.

#### 5. 화면 정보

##### S-009 원고 생성 세팅 페이지

좌우 분할 레이아웃입니다. 좌측에는 원본 기사 미리보기를, 우측에는 생성 설정 패널을 배치합니다. 하단에 "원고 생성" 버튼을 배치합니다.

##### S-010 원고 생성 중 페이지

생성 진행 상태를 표시하는 화면입니다. 프로그레스 바 또는 단계별 상태 표시를 제공합니다. 생성이 완료되면 자동으로 원고 편집 화면(S-011)으로 이동합니다.

#### 6. API 정보

- POST /api/manuscripts/generate: 원고 생성 요청 (소스 ID, 프롬프트 ID, 이미지 템플릿 ID, 키워드, 글 길이, 이미지 생성 개수)
- GET /api/manuscripts/:id/status: 원고 생성 진행 상태 조회

#### 7. 비즈니스 로직

- 원고 생성은 비동기로 처리됩니다. 사용자가 생성을 요청하면 작업 큐에 등록되고, 백그라운드에서 처리됩니다.
- 소스 기사에 작업 중인 사용자로 등록됩니다. 원고 생성이 완료되거나 실패하면 작업 중 상태가 해제됩니다.
- 이미지 생성 AI(나노바나나)는 추상화 레이어를 통해 호출하며, 추후 다른 서비스로 교체 가능합니다.
- 글 길이는 정확한 값이 아닌 대략적인 가이드라인이며, AI가 자연스러운 분량으로 조정할 수 있습니다.

#### 8. 연관 기능

- F-002 소스 크롤링: 소스 기사를 제공합니다.
- F-003 프롬프트 관리: 원고 스타일 템플릿을 제공합니다.
- F-004 이미지 처리 템플릿 관리: 이미지 가공/생성 방식을 제공합니다.
- F-006 원고 편집 및 관리: 생성된 원고를 편집하고 관리합니다.

---

### F-006. 원고 편집 및 관리

#### 1. 기능 개요

##### 1.1 목적

AI가 생성한 원고를 사용자가 직접 검토하고 편집하여 최종 원고로 완성합니다. 네이버 블로그/카페에 복사-붙여넣기 했을 때 서식이 유지되는 WYSIWYG 편집기를 제공하며, 생성된 원고를 목록으로 관리합니다.

##### 1.2 핵심 가치

- 네이버 편집기 호환 서식으로 복붙 시 서식 유지
- 직관적인 편집 환경으로 빠른 원고 완성
- 내 원고 목록을 통한 체계적인 작업 관리

#### 2. 권한 체계

각 사용자는 자신이 생성한 원고만 조회, 편집, 삭제할 수 있습니다. 관리자는 모든 사용자의 원고를 조회할 수 있지만, 편집은 해당 원고의 생성자만 가능합니다.

#### 3. 데이터 항목

##### 3.1 원고 정보

- 원고 제목: 사용자가 지정하거나, 원본 기사 제목을 기반으로 자동 생성됩니다.
- 원고 본문: HTML 형태의 서식이 적용된 콘텐츠입니다.
- 포함된 이미지 목록: 원고에 사용된 이미지 파일 목록입니다.
- 원본 소스 기사 정보: 어떤 기사를 기반으로 생성했는지 기록합니다.
- 생성 설정: 사용한 프롬프트, 이미지 템플릿, 키워드, 글 길이 정보입니다.

##### 3.2 시스템 관리 정보

- 생성 일시, 최종 수정 일시
- 원고 상태: 생성 완료, 포스팅 완료

#### 4. 상세 기능 명세

##### 4.1 WYSIWYG 편집기

네이버 블로그/카페 편집기와 호환되는 서식을 지원하는 편집기를 제공합니다.

접근 권한: 원고 생성자만 편집할 수 있습니다.

지원하는 서식:
- 글자 크기 조절
- 글자 색상 변경
- 굵기 (Bold)
- 기울기 (Italic)
- 취소선 (Strikethrough)
- 텍스트 정렬 (좌측, 중앙, 우측)
- 인용구
- 링크 삽입
- 이미지 삽입 및 위치 변경

동작 방식:
1. AI가 생성한 원고가 편집기에 로드됩니다.
2. 사용자는 텍스트를 직접 수정할 수 있습니다. 텍스트 선택 후 서식 도구를 적용합니다.
3. 이미지를 클릭하여 선택하면 삭제, 교체 옵션이 표시됩니다.
4. 이미지 위치를 드래그하여 변경할 수 있습니다.
5. 편집기 도구 모음에서 "이미지 추가" 버튼으로 새 이미지를 삽입할 수 있습니다. 이미지 삽입 시 파일 업로드 또는 AI 이미지 생성 중 선택합니다.
6. 편집 내용은 자동 저장되거나, "저장" 버튼으로 수동 저장합니다.

표시 규칙:
- 편집기 상단에 서식 도구 모음을 배치합니다.
- 편집 영역은 실제 포스팅될 형태와 유사하게 보여줍니다(WYSIWYG).
- 복사 버튼을 제공하여 원고 전체를 클립보드에 복사할 수 있습니다. 복사 시 HTML 서식이 포함되어 네이버 편집기에 붙여넣기 했을 때 서식이 유지됩니다.

##### 4.2 내 원고 목록

사용자가 자신의 원고를 목록으로 관리합니다.

접근 권한: 각 사용자는 자신의 원고만 볼 수 있습니다. 관리자는 전체 사용자의 원고를 조회할 수 있습니다.

동작 방식:
1. 내 원고 목록을 최신순으로 표시합니다.
2. 각 항목에 원고 제목, 상태(생성 완료/포스팅 완료), 생성일, 사용한 프롬프트명을 표시합니다.
3. 원고를 클릭하면 편집 화면으로 이동합니다.
4. 삭제 버튼으로 원고를 삭제할 수 있습니다. 삭제 시 확인 다이얼로그를 표시합니다.

표시 규칙:
- 상태별 필터를 제공합니다. (전체, 생성 완료, 포스팅 완료)
- 포스팅 완료된 원고에는 등록된 URL을 함께 표시합니다.

##### 4.3 원고 삭제

사용자가 불필요한 원고를 삭제합니다.

동작 방식:
1. 삭제 버튼을 클릭하면 "이 원고를 삭제하시겠습니까?"라는 확인 다이얼로그를 표시합니다.
2. 확인 시 원고와 관련된 이미지 파일을 모두 삭제합니다.
3. 포스팅 완료 상태의 원고도 삭제할 수 있습니다. 단, 성과 추적 데이터는 별도로 보관됩니다.

#### 5. 화면 정보

##### S-011 원고 편집 페이지

상단에 서식 도구 모음(크기, 색상, 굵기, 기울기, 취소선, 정렬, 인용구, 링크, 이미지)을 배치합니다. 중앙에 WYSIWYG 편집 영역을 배치합니다. 우측 상단에 "복사", "저장", "포스팅" 버튼을 배치합니다.

##### S-012 내 원고 목록 페이지

상단에 상태별 필터 탭을 배치합니다. 원고 목록을 리스트 형태로 표시하며, 각 항목에 제목, 상태, 생성일, 프롬프트명을 표시합니다. 각 항목에 편집, 삭제 버튼을 표시합니다.

#### 6. API 정보

- GET /api/manuscripts: 내 원고 목록 조회 (상태 필터, 페이지네이션)
- GET /api/manuscripts/:id: 원고 상세 조회 (편집기 데이터)
- PUT /api/manuscripts/:id: 원고 수정 (편집기 내용 저장)
- DELETE /api/manuscripts/:id: 원고 삭제
- POST /api/manuscripts/:id/copy: 원고 클립보드 복사용 HTML 반환
- GET /api/admin/manuscripts: 전체 원고 목록 조회 (관리자)

#### 7. 비즈니스 로직

- 편집기에서 복사 시 네이버 블로그/카페 편집기에서 인식 가능한 HTML 형태로 클립보드에 저장합니다.
- 이미지는 서버에 저장된 URL로 포함됩니다. 네이버에 붙여넣기 시 이미지가 정상적으로 표시되려면, 이미지 URL이 외부에서 접근 가능해야 합니다.
- 자동 저장은 편집 후 일정 시간(예: 30초) 동안 추가 편집이 없으면 자동으로 저장합니다.

#### 8. 연관 기능

- F-005 원고 생성: 생성된 원고를 편집기에 로드합니다.
- F-007 포스팅 관리: 편집 완료 후 포스팅 처리를 수행합니다.

---

### F-007. 포스팅 관리

#### 1. 기능 개요

##### 1.1 목적

완성된 원고를 네이버 블로그/카페에 포스팅한 후, 포스팅된 URL을 등록하여 완료 처리합니다. 포스팅은 사용자가 직접 복사-붙여넣기로 수행하며, 시스템은 URL 등록과 상태 관리를 담당합니다.

##### 1.2 핵심 가치

- 포스팅 작업의 완료 상태를 체계적으로 관리
- 포스팅 URL 등록을 통해 성과 추적 연동
- 작업 이력 관리로 생산성 파악

#### 2. 권한 체계

각 사용자는 자신의 원고에 대해서만 포스팅 완료 처리를 할 수 있습니다. 관리자는 전체 포스팅 현황을 조회할 수 있습니다.

#### 3. 데이터 항목

##### 3.1 포스팅 정보

- 포스팅 URL: 네이버 블로그/카페에 게시된 글의 URL입니다.
- 포스팅 플랫폼: 블로그 또는 카페를 구분합니다.
- 포스팅 완료 일시: URL을 등록한 시점입니다.
- 포스팅 키워드: 성과 추적에 사용할 키워드입니다. 원고 생성 시 입력한 키워드를 기본값으로 사용하되, 변경할 수 있습니다.

#### 4. 상세 기능 명세

##### 4.1 원고 복사

사용자가 편집된 원고를 클립보드에 복사합니다.

동작 방식:
1. 원고 편집 페이지에서 "복사" 버튼을 클릭합니다.
2. 원고 전체(서식 + 이미지 포함)가 클립보드에 복사됩니다.
3. "복사되었습니다" 피드백을 표시합니다.
4. 사용자는 네이버 블로그/카페 편집기에서 Ctrl+V로 붙여넣기 합니다.

##### 4.2 포스팅 완료 처리

사용자가 포스팅한 글의 URL을 등록하여 작업을 완료 처리합니다.

접근 권한: 원고 생성자만 수행할 수 있습니다.

동작 방식:
1. 원고 편집 페이지 또는 내 원고 목록에서 "포스팅 완료" 버튼을 클릭합니다.
2. 포스팅 URL 입력 필드가 표시됩니다.
3. 포스팅 플랫폼(블로그/카페)을 선택합니다. URL 형태를 분석하여 자동 선택할 수도 있습니다.
4. 성과 추적에 사용할 키워드를 확인합니다. 원고 생성 시 입력한 키워드가 기본으로 입력되어 있으며, 수정 가능합니다.
5. "완료" 버튼을 클릭하면 원고 상태가 "포스팅 완료"로 변경됩니다.
6. 성과 추적(F-008)이 자동으로 시작됩니다.

예외 처리:
- URL이 비어 있으면 "포스팅 URL을 입력해 주세요"를 표시합니다.
- 유효하지 않은 URL 형식이면 "올바른 URL을 입력해 주세요"를 표시합니다.

#### 5. 화면 정보

포스팅 완료 처리 UI는 원고 편집 페이지(S-011)와 내 원고 목록(S-012)에 통합되어 있습니다. 포스팅 완료 버튼 클릭 시 모달 또는 인라인 폼으로 URL 입력, 플랫폼 선택, 키워드 확인을 받습니다.

#### 6. API 정보

- POST /api/manuscripts/:id/publish: 포스팅 완료 처리 (URL, 플랫폼, 키워드)
- GET /api/manuscripts/:id/publish-info: 포스팅 정보 조회

#### 7. 비즈니스 로직

- 포스팅 완료 처리 시 성과 추적(F-008)이 자동으로 활성화됩니다.
- 포스팅 완료된 원고도 삭제할 수 있습니다. 삭제 시 성과 추적도 중단됩니다.
- 하나의 원고에 대해 하나의 포스팅 URL만 등록할 수 있습니다.

#### 8. 연관 기능

- F-006 원고 편집 및 관리: 편집 완료된 원고에 대해 포스팅 처리를 수행합니다.
- F-008 성과 추적: 포스팅 URL 등록 시 자동으로 성과 추적이 시작됩니다.

---

### F-008. 성과 추적

#### 1. 기능 개요

##### 1.1 목적

포스팅된 콘텐츠의 성과를 자동으로 추적합니다. 네이버 검색에서의 키워드 순위, 게시글의 조회수, 댓글 수를 주기적으로 수집하여 포스팅의 효과를 측정합니다.

##### 1.2 핵심 가치

- 포스팅 성과를 데이터 기반으로 객관적 측정
- 키워드 순위 변동 추이를 통한 SEO 전략 수립
- 효과적인 프롬프트/스타일 파악을 통한 콘텐츠 품질 개선

#### 2. 권한 체계

각 사용자는 자신의 포스팅에 대한 성과 데이터를 조회할 수 있습니다. 관리자는 전체 사용자의 성과 데이터를 조회할 수 있습니다.

#### 3. 데이터 항목

##### 3.1 추적 데이터

포스팅 완료 후 7일간 1시간 간격으로 다음 데이터를 수집합니다.

- 키워드 순위: 네이버 검색(블로그 탭 또는 카페 탭)에서 해당 키워드로 검색했을 때의 순위입니다. 플랫폼(블로그/카페)에 따라 해당 탭에서 순위를 확인합니다.
- 조회수: 게시글의 현재 조회수입니다.
- 댓글 수: 게시글의 현재 댓글 수입니다.
- 수집 일시: 데이터를 수집한 시점입니다.

##### 3.2 시스템 관리 정보

- 추적 시작일: 포스팅 완료 처리 시점입니다.
- 추적 종료일: 시작일 + 7일입니다.
- 추적 상태: 추적 중, 추적 완료

#### 4. 상세 기능 명세

##### 4.1 자동 성과 수집

포스팅 완료 처리된 원고의 성과를 자동으로 수집합니다.

동작 방식:
1. 포스팅 완료 처리(F-007) 시 성과 추적이 자동으로 시작됩니다.
2. 1시간 간격으로 다음을 수행합니다:
   - 네이버 검색에서 등록된 키워드로 검색하여 해당 포스팅의 순위를 확인합니다.
   - 포스팅 URL에 접근하여 조회수와 댓글 수를 크롤링합니다.
3. 수집된 데이터를 시간별로 기록합니다.
4. 7일이 경과하면 추적을 종료합니다.

예외 처리:
- 포스팅이 삭제되어 URL에 접근할 수 없는 경우, 해당 수집 건에 "접근 불가"를 기록하고 추적을 계속합니다.
- 키워드 검색 결과에 해당 포스팅이 없는 경우, 순위를 "순위권 외"로 기록합니다.
- 크롤링에 실패한 경우, 다음 주기에 재시도합니다.

##### 4.2 성과 데이터 조회

사용자가 자신의 포스팅 성과를 확인합니다.

접근 권한: 각 사용자는 자신의 포스팅 성과를, 관리자는 전체 포스팅 성과를 조회할 수 있습니다.

동작 방식:
1. 내 원고 목록에서 포스팅 완료된 항목에 간단한 성과 요약을 표시합니다.
   - 최신 키워드 순위, 현재 조회수, 댓글 수를 표시합니다.
2. 원고를 클릭하면 상세 성과 페이지에서 시간별 추이를 확인할 수 있습니다.
   - 키워드 순위 변동 그래프
   - 조회수 변동 그래프
   - 댓글 수 변동 그래프

#### 5. 화면 정보

##### S-013 성과 상세 페이지

상단에 현재 순위, 총 조회수, 총 댓글 수를 요약 카드로 표시합니다. 하단에 시간별 추이 그래프(키워드 순위, 조회수, 댓글 수)를 표시합니다. 추적 기간(7일)과 현재 진행 상황을 표시합니다.

#### 6. API 정보

- GET /api/manuscripts/:id/performance: 성과 데이터 조회 (시간별 추이)
- GET /api/manuscripts/:id/performance/summary: 성과 요약 조회 (최신 순위, 조회수, 댓글 수)

#### 7. 비즈니스 로직

- 성과 추적은 포스팅 완료 처리 시 자동으로 시작되며, 별도의 사용자 조작이 필요 없습니다.
- 추적 주기: 1시간 간격으로 데이터를 수집합니다.
- 추적 기간: 포스팅 완료 후 7일간 진행됩니다.
- 원고를 삭제하면 성과 추적이 중단되고 수집된 데이터도 삭제됩니다.
- 키워드 순위 확인은 네이버 검색 기준이며, 블로그 포스팅은 블로그 탭에서, 카페 포스팅은 카페 탭에서 순위를 확인합니다.

#### 8. 연관 기능

- F-007 포스팅 관리: 포스팅 완료 시 성과 추적이 시작됩니다.
- F-009 대시보드: 성과 요약 데이터를 대시보드에서 표시합니다.

---

### F-009. 대시보드

#### 1. 기능 개요

##### 1.1 목적

사용자의 작업 현황과 최근 포스팅 성과를 한눈에 파악할 수 있는 종합 현황 화면을 제공합니다. 로그인 직후 표시되는 메인 화면으로, 핵심 지표를 요약하여 보여줍니다.

##### 1.2 핵심 가치

- 일일/주간 작업량을 한눈에 파악
- 최근 포스팅의 성과를 빠르게 확인
- 전체 작업 흐름의 현황 파악

#### 2. 권한 체계

일반 사용자는 자신의 작업 현황과 성과만 볼 수 있습니다. 관리자는 전체 사용자의 종합 현황을 조회할 수 있습니다.

#### 3. 상세 기능 명세

##### 3.1 작업량 요약

사용자가 얼마나 작업했는지를 요약하여 표시합니다.

표시 항목:
- 오늘 생성한 원고 수
- 오늘 포스팅 완료한 원고 수
- 이번 주 생성한 원고 수
- 이번 주 포스팅 완료한 원고 수
- 현재 생성 완료(미포스팅) 원고 수

관리자 추가 표시 항목:
- 전체 사용자의 작업량 합계
- 사용자별 작업량 순위

##### 3.2 최근 작업 리스트 및 성과

최근에 포스팅 완료한 원고와 그 성과를 목록으로 표시합니다.

표시 항목:
- 원고 제목
- 포스팅 일시
- 플랫폼 (블로그/카페)
- 키워드
- 현재 키워드 순위
- 현재 조회수
- 댓글 수

동작 방식:
1. 최근 포스팅 완료한 원고를 최신순으로 표시합니다.
2. 최대 10~20개 항목을 표시합니다.
3. 각 항목을 클릭하면 성과 상세 페이지(S-013)로 이동합니다.
4. "전체 보기" 링크를 통해 내 원고 목록(S-012)으로 이동할 수 있습니다.

##### 3.3 빠른 접근

주요 기능에 빠르게 접근할 수 있는 바로가기를 제공합니다.

- 새 소스 확인하기 → 소스 기사 목록(S-004)
- 내 원고 관리 → 내 원고 목록(S-012)

#### 4. 화면 정보

##### S-014 대시보드 페이지

상단에 작업량 요약 카드(오늘 생성/포스팅, 이번 주 생성/포스팅, 미포스팅 원고)를 가로로 배치합니다. 중단에 최근 포스팅 성과 리스트를 표시합니다. 하단 또는 사이드에 빠른 접근 바로가기를 배치합니다.

#### 5. API 정보

- GET /api/dashboard/summary: 작업량 요약 데이터 조회
- GET /api/dashboard/recent-posts: 최근 포스팅 성과 목록 조회
- GET /api/admin/dashboard/summary: 전체 작업량 요약 (관리자)

#### 6. 비즈니스 로직

- 대시보드 데이터는 페이지 접근 시 실시간으로 조회합니다.
- "오늘"은 자정(00:00) 기준이며, "이번 주"는 월요일~일요일 기준입니다.
- 성과 데이터는 가장 최근에 수집된 값을 표시합니다.

#### 7. 연관 기능

- F-001 인증 및 사용자 관리: 로그인 후 대시보드로 이동합니다.
- F-006 원고 편집 및 관리: 원고 생성/포스팅 수 데이터를 제공합니다.
- F-008 성과 추적: 성과 요약 데이터를 제공합니다.

---

## 4. 화면 목록

| 화면 ID | 화면명 | 접근 권한 | 설명 |
|---------|--------|----------|------|
| S-001 | 로그인 페이지 | 비인증 사용자 | 아이디/비밀번호 로그인 |
| S-002 | 회원가입 페이지 | 비인증 사용자 | 가입 신청 폼 |
| S-003 | 사용자 관리 페이지 | 관리자 | 가입 승인, 역할 관리 |
| S-004 | 소스 기사 목록 페이지 | 인증 사용자 | 크롤링된 기사 탐색 및 선택 |
| S-005 | 프롬프트 관리 페이지 | 관리자 | 프롬프트 템플릿 CRUD |
| S-006 | 프롬프트 편집 페이지 | 관리자 | 프롬프트 내용 작성/수정 |
| S-007 | 이미지 처리 템플릿 관리 페이지 | 관리자 | 이미지 가공 방식 CRUD |
| S-008 | 이미지 처리 템플릿 편집 페이지 | 관리자 | 이미지 처리 설정 작성/수정 |
| S-009 | 원고 생성 세팅 페이지 | 인증 사용자 | 원고 생성 옵션 설정 |
| S-010 | 원고 생성 중 페이지 | 인증 사용자 | 생성 진행 상태 표시 |
| S-011 | 원고 편집 페이지 | 인증 사용자 | WYSIWYG 편집기 |
| S-012 | 내 원고 목록 페이지 | 인증 사용자 | 원고 관리 및 상태 확인 |
| S-013 | 성과 상세 페이지 | 인증 사용자 | 시간별 성과 추이 그래프 |
| S-014 | 대시보드 | 인증 사용자 | 작업량 요약, 최근 성과 |

---

## 5. API 목록

### 인증 (Auth)

| Method | URI | 설명 | 권한 |
|--------|-----|------|------|
| POST | /api/auth/register | 회원가입 신청 | 공개 |
| POST | /api/auth/login | 로그인 | 공개 |
| POST | /api/auth/logout | 로그아웃 | 인증 |

### 사용자 관리 (Admin)

| Method | URI | 설명 | 권한 |
|--------|-----|------|------|
| GET | /api/admin/users | 사용자 목록 조회 | 관리자 |
| GET | /api/admin/users/pending | 가입 대기 목록 조회 | 관리자 |
| PATCH | /api/admin/users/:id/approve | 가입 승인 | 관리자 |
| PATCH | /api/admin/users/:id/reject | 가입 반려 | 관리자 |
| PATCH | /api/admin/users/:id/role | 역할 변경 | 관리자 |
| PATCH | /api/admin/users/:id/deactivate | 계정 비활성화 | 관리자 |

### 소스 (Sources)

| Method | URI | 설명 | 권한 |
|--------|-----|------|------|
| GET | /api/sources | 소스 기사 목록 조회 | 인증 |
| GET | /api/sources/:id | 소스 기사 상세 조회 | 인증 |

### 프롬프트 (Prompts)

| Method | URI | 설명 | 권한 |
|--------|-----|------|------|
| GET | /api/prompts | 프롬프트 목록 조회 | 인증 |
| GET | /api/prompts/:id | 프롬프트 상세 조회 | 인증 |
| POST | /api/admin/prompts | 프롬프트 생성 | 관리자 |
| PUT | /api/admin/prompts/:id | 프롬프트 수정 | 관리자 |
| PATCH | /api/admin/prompts/:id/toggle | 프롬프트 활성화/비활성화 | 관리자 |
| DELETE | /api/admin/prompts/:id | 프롬프트 삭제 | 관리자 |

### 이미지 처리 템플릿 (Image Templates)

| Method | URI | 설명 | 권한 |
|--------|-----|------|------|
| GET | /api/image-templates | 템플릿 목록 조회 | 인증 |
| GET | /api/image-templates/:id | 템플릿 상세 조회 | 인증 |
| POST | /api/admin/image-templates | 템플릿 생성 | 관리자 |
| PUT | /api/admin/image-templates/:id | 템플릿 수정 | 관리자 |
| PATCH | /api/admin/image-templates/:id/toggle | 활성화/비활성화 | 관리자 |
| DELETE | /api/admin/image-templates/:id | 템플릿 삭제 | 관리자 |

### 원고 (Manuscripts)

| Method | URI | 설명 | 권한 |
|--------|-----|------|------|
| POST | /api/manuscripts/generate | 원고 생성 요청 | 인증 |
| GET | /api/manuscripts/:id/status | 원고 생성 상태 조회 | 인증 |
| GET | /api/manuscripts | 내 원고 목록 조회 | 인증 |
| GET | /api/manuscripts/:id | 원고 상세 조회 | 인증 |
| PUT | /api/manuscripts/:id | 원고 수정 | 인증 |
| DELETE | /api/manuscripts/:id | 원고 삭제 | 인증 |
| POST | /api/manuscripts/:id/copy | 복사용 HTML 반환 | 인증 |
| POST | /api/manuscripts/:id/publish | 포스팅 완료 처리 | 인증 |
| GET | /api/manuscripts/:id/publish-info | 포스팅 정보 조회 | 인증 |
| GET | /api/admin/manuscripts | 전체 원고 목록 조회 | 관리자 |

### 성과 (Performance)

| Method | URI | 설명 | 권한 |
|--------|-----|------|------|
| GET | /api/manuscripts/:id/performance | 성과 데이터 조회 | 인증 |
| GET | /api/manuscripts/:id/performance/summary | 성과 요약 조회 | 인증 |

### 대시보드 (Dashboard)

| Method | URI | 설명 | 권한 |
|--------|-----|------|------|
| GET | /api/dashboard/summary | 작업량 요약 | 인증 |
| GET | /api/dashboard/recent-posts | 최근 포스팅 성과 | 인증 |
| GET | /api/admin/dashboard/summary | 전체 작업량 요약 | 관리자 |

---

## 6. 비즈니스 로직 요약

### 자동화 규칙

| 규칙 | 조건 | 동작 | 주기 |
|------|------|------|------|
| 뉴스 크롤링 | 시스템 상시 가동 | 사전 정의된 뉴스 사이트에서 기사 자동 수집 | 1시간 |
| 소스 만료 삭제 | 수집 후 7일 경과 | 미사용 소스 기사 자동 삭제 | 크롤링 시 |
| 성과 추적 | 포스팅 완료 처리 시 | 키워드 순위, 조회수, 댓글 수 자동 수집 | 1시간 (7일간) |
| 추적 종료 | 추적 시작 후 7일 경과 | 성과 수집 중단 | 자동 |
| 편집기 자동 저장 | 편집 후 30초 무조작 시 | 원고 내용 자동 저장 | 이벤트 기반 |

### 데이터 보관 정책

| 데이터 | 보관 기간 | 삭제 조건 |
|--------|----------|----------|
| 소스 기사 | 7일 | 수집일로부터 7일 후 자동 삭제 (원고에 사용된 경우 원본 데이터는 원고에 보존) |
| 원고 | 무기한 | 사용자 수동 삭제 또는 포스팅 완료 후 사용자가 삭제 |
| 성과 데이터 | 원고 삭제 시까지 | 원고 삭제 시 함께 삭제 |
| 이미지 파일 | 원고 삭제 시까지 | 원고 삭제 시 함께 삭제 |

### 사용자 역할별 권한 요약

| 기능 | 관리자 | 일반 사용자 |
|------|--------|------------|
| 가입 승인/반려 | O | X |
| 사용자 관리 | O | X |
| 프롬프트 관리 (CRUD) | O | X |
| 이미지 템플릿 관리 (CRUD) | O | X |
| 소스 기사 조회 | O | O |
| 원고 생성 | O | O |
| 원고 편집/삭제 (자신의 것) | O | O |
| 포스팅 완료 처리 | O | O |
| 성과 조회 (자신의 것) | O | O |
| 전체 원고/성과 조회 | O | X |
| 전체 대시보드 조회 | O | X |


---

## 7. System Seeds (시스템 설계 입력용 요약)

### 비동기 처리 후보 기능

- F-002 소스 크롤링
- F-005 원고 생성
- F-008 성과 추적

### 스케줄 기반 작업

- 뉴스 크롤링: 1시간 주기
- 성과 추적 수집: 1시간 주기 (7일간)

### 외부 연동

- 뉴스 사이트 크롤링
- LLM 텍스트 생성
- 이미지 생성 AI
- 네이버 검색/게시글 크롤링

### 데이터 라이프사이클

- 소스 기사: 7일
- 성과 데이터: 원고 삭제 시까지
- 원고/이미지: 사용자 삭제 시까지
